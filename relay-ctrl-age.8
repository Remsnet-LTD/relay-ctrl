.TH relay-ctrl-age 8
.SH NAME
relay-ctrl-age \- age the list of addresses allowed by relay-ctrl-allow
.SH SYNOPSIS
.B relay-ctrl-age
[
.I IP ...
]
.SH DESCRIPTION
.B relay-ctrl-age
updates the time stamp on each of the named relay client IPs in the
spool directory.
It then examines the dates on the all the relay client IP files,
and removes any that have not been touched for the last 15 minutes.
It also updates the CDB that is used by
.B tcpserver
to control relaying by remote SMTP clients.
.SH "RETURN VALUES"
Returns 111 (temporary failure) if any operation fails; 0 otherwise.
.SH CONFIG FILES
All the following configuration files are located (by default) in
.BR /etc/relay-ctrl .
Only the first line of each file is read, and only the trailng newline
is stripped.
.TP
.B expiry
The age that the IP files must be (in seconds) before they are
removed.  Defaults to
.B 900
seconds.
.TP
.B rule
Contains the string that is appended to each relay client IP to
produce its rule.
Defaults to
.IR :allow,RELAYCLIENT='' .
.TP
.B rulesdir
Names the directory in which the SMTP rules and CDB files will be
found.  Defaults to
.IR /etc/tcpcontrol .
.TP
.B smtpcdb
Names the file in
.I rulesdir
that will have the SMTP rules CDB written to.  Defaults to
.BR smtp.cdb .
.TP
.B smtprules
Names the file in
.I rulesdir
that contains the base set of rules that is prepended to the rules
generated by
.BR relay-ctrl-age .
Defaults to
.BR smtp.rules .
.TP
.B spooldir
Names the directory in which the relay client IP files are located.
Defaults to
.IR /var/spool/relay-ctrl .
.TP
.B tcprules
Names the path to the
.B tcprules
program (part of the
.B ucspi-tcp
package).  Defaults to
.BR /usr/bin/tcprules .
.SH "SEE ALSO"
relay-ctrl-allow(8),
qmail-smtpd(8),
tcprules(1),
tcpserver(1)
